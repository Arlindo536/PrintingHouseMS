# 🖨️ PrintingHouseMS - Class Diagram 📄

## Overview 🧩
Details the class structure for the PrintingHouseMS system, including attributes, operations, and relationships.

## Key Components 🏗️

### 👤 Customer Class
- **Description**: Represents users placing book printing orders
- **Attributes**:
  - customer_id (PK)
  - name, email, phone, address
  - registration_date
  - password_hash
- **Operations**: register(), login(), updateProfile(), viewOrderHistory(), placeOrder()
- **Relationships**: One Customer ➝ many Orders

### 🧾 Order Class
- **Description**: Details of book printing orders
- **Attributes**:
  - order_id (PK), customer_id (FK)
  - order_date, total_amount
  - payment_status, order_status
  - shipping_address, billing_address
- **Operations**: calculateTotal(), updateStatus(), processPayment(), generateInvoice(), trackOrder()
- **Relationships**:
  - One Order ➝ one Customer
  - One Order ➝ many OrderItems
  - One Order ➝ many ProductionStages
  - One Order ➝ 1–3 Payments

### 📦 OrderItem Class
- **Description**: Individual book configurations in an order
- **Attributes**: item_id (PK), order_id (FK), book_config_id (FK), quantity, unit_price, subtotal
- **Operations**: calculateSubtotal(), updateQuantity()
- **Relationships**:
  - Many OrderItems ➝ one Order
  - One OrderItem ➝ one BookConfig

### 📚 BookConfig Class
- **Description**: Book specs and configuration
- **Attributes**: book_config_id (PK), title, author, page_count, page_size, cover_type, binding_type, paper_type, color_printing, manuscript_file_path, cover_file_path
- **Operations**: calculatePricing(), generatePreview(), validateFiles()
- **Relationships**:
  - One BookConfig ➝ many OrderItems
  - Uses FileManager for document storage

### ⚙️ ProductionStage Class
- **Description**: Order progress through production stages
- **Attributes**: stage_id (PK), order_id (FK), staff_id (FK), stage_name, start_date, end_date, status, notes
- **Operations**: startStage(), completeStage(), addNotes()
- **Relationships**:
  - Many ProductionStages ➝ one Order
  - One Stage ➝ one Staff

### 👨‍🔧 Staff Class
- **Description**: Employee data for printing house
- **Attributes**: staff_id (PK), name, email, role, department, password_hash
- **Operations**: login(), updateProfile(), assignTask(), updateProductionStatus()
- **Relationships**:
  - One Staff ➝ many ProductionStages
  - Staff ➝ receives Notifications

### 🔔 Notification Class
- **Description**: Alerts sent to users
- **Attributes**: notification_id (PK), recipient_id, recipient_type, message, created_at, is_read, notification_type
- **Operations**: markAsRead(), send()
- **Relationships**:
  - Generated by Orders
  - Received by Customers & Staff

### 💳 Payment Class
- **Description**: Payment processing
- **Attributes**: payment_id (PK), order_id (FK), amount, payment_date, payment_method, transaction_id, status
- **Operations**: processPayment(), validatePayment(), generateReceipt()
- **Relationships**: 1–3 Payments ➝ one Order

### 📁 FileManager Class
- **Description**: Manages file uploads & storage
- **Attributes**: file_id (PK), related_id, related_type, file_path, file_type, upload_date
- **Operations**: uploadFile(), validateFile(), getFileURL()
- **Relationships**: Used by BookConfig

### 📊 ReportGenerator Class
- **Description**: Generates reports for BI
- **Operations**: generateSalesReport(), generateProductionReport(), generateCustomerReport(), exportReport()

## Class Diagram Visualization 🖼️

```mermaid
classDiagram
    class Customer {
        -int customer_id
        -String name
        -String email
        -String phone
        -String address
        -Date registration_date
        -String password_hash
        +register()
        +login()
        +updateProfile()
        +viewOrderHistory()
        +placeOrder()
    }

    class Order {
        -int order_id
        -int customer_id
        -Date order_date
        -double total_amount
        -String payment_status
        -String order_status
        -String shipping_address
        -String billing_address
        +calculateTotal()
        +updateStatus()
        +processPayment()
        +generateInvoice()
        +trackOrder()
    }

    class OrderItem {
        -int item_id
        -int order_id
        -int book_config_id
        -int quantity
        -double unit_price
        -double subtotal
        +calculateSubtotal()
        +updateQuantity()
    }

    class BookConfig {
        -int book_config_id
        -String title
        -String author
        -int page_count
        -String page_size
        -String cover_type
        -String binding_type
        -String paper_type
        -boolean color_printing
        -String manuscript_file_path
        -String cover_file_path
        +calculatePricing()
        +generatePreview()
        +validateFiles()
    }

    class ProductionStage {
        -int stage_id
        -int order_id
        -int staff_id
        -String stage_name
        -Date start_date
        -Date end_date
        -String status
        -String notes
        +startStage()
        +completeStage()
        +addNotes()
    }

    class Staff {
        -int staff_id
        -String name
        -String email
        -String role
        -String department
        -String password_hash
        +login()
        +updateProfile()
        +assignTask()
        +updateProductionStatus()
    }

    class Notification {
        -int notification_id
        -int recipient_id
        -String recipient_type
        -String message
        -DateTime created_at
        -boolean is_read
        -String notification_type
        +markAsRead()
        +send()
    }

    class Payment {
        -int payment_id
        -int order_id
        -double amount
        -Date payment_date
        -String payment_method
        -String transaction_id
        -String status
        +processPayment()
        +validatePayment()
        +generateReceipt()
    }

    class FileManager {
        -int file_id
        -int related_id
        -String related_type
        -String file_path
        -String file_type
        -Date upload_date
        +uploadFile()
        +validateFile()
        +getFileURL()
    }

    class ReportGenerator {
        +generateSalesReport(Date startDate, Date endDate)
        +generateProductionReport()
        +generateCustomerReport()
        +exportReport(String format)
    }

    Customer "1" -- "many" Order : places
    Order "1" -- "many" OrderItem : contains
    OrderItem "many" -- "1" BookConfig : references
    Order "1" -- "many" ProductionStage : goes through
    Staff "1" -- "many" ProductionStage : manages
    Order "1" -- "1..3" Payment : has
    BookConfig -- FileManager : uses
    Order -- Notification : generates
    Customer -- Notification : receives
    Staff -- Notification : receives
